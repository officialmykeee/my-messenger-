<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Message Bubble</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            overflow: hidden;
            background-image: url("https://i.ibb.co/HfvQJj50/Screenshot-20250730-222749.jpg");
            background-repeat: no-repeat;
            background-position: center top;
            background-size: cover;
            background-color: #f9f9f9;
            font-family: Arial, sans-serif;
            height: 100vh;
        }

        .chat-container {
            width: 100%;
            height: 100vh;
            display: flex;
            flex-direction: column;
            padding: 20px;
            box-sizing: border-box;
            overflow-y: auto;
            overflow-x: hidden;
        }

        /* Custom scrollbar styling */
        .chat-container::-webkit-scrollbar {
            width: 6px;
        }

        .chat-container::-webkit-scrollbar-track {
            background: transparent;
        }

        .chat-container::-webkit-scrollbar-thumb {
            background: rgba(255, 255, 255, 0.3);
            border-radius: 3px;
        }

        .chat-container::-webkit-scrollbar-thumb:hover {
            background: rgba(255, 255, 255, 0.5);
        }

        .message-bubble {
            background: #ffffff;
            border-radius: 18px;
            padding: 12px 16px;
            margin-bottom: 8px;
            position: relative;
            box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
            max-width: 70%;
            word-wrap: break-word;
            align-self: flex-start;
            transition: transform 0.2s ease-out;
            touch-action: pan-y;
            user-select: none;
        }

        .message-bubble.sliding {
            transition: none;
        }

        .message-bubble.returning {
            transition: transform 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);
        }

        /* Reply icon styling */
        .reply-icon {
            position: absolute;
            top: 50%;
            transform: translateY(-50%);
            opacity: 0;
            transition: opacity 0.2s ease-out;
            z-index: 1;
        }

        .reply-icon.show {
            opacity: 1;
        }

        /* Position for received messages (left side of bubble) */
        .message-bubble .reply-icon {
            left: -50px;
        }

        /* Position for sent messages (right side of bubble, but appears on left when sliding) */
        .message-bubble.bubble-sent .reply-icon {
            left: -50px;
        }

        .icon-wrapper {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 35px;
            height: 35px;
            background: rgba(0, 0, 0, 0.6);
            border-radius: 50%;
        }

        /* Reply styling */
        .reply-container {
            background: rgba(0, 122, 255, 0.1);
            border-left: 3px solid #007AFF;
            border-radius: 8px;
            padding: 8px 10px;
            margin-bottom: 8px;
            font-size: 14px;
        }

        .reply-sender {
            color: #007AFF;
            font-weight: 600;
            font-size: 13px;
            margin-bottom: 2px;
        }

        .reply-text {
            color: #666;
            margin: 0;
            line-height: 1.3;
        }

        /* Date separator styling */
        .date-separator {
            text-align: center;
            margin: 20px 0;
        }

        .date-badge {
            background: rgba(0, 0, 0, 0.15);
            color: #ffffff;
            padding: 6px 12px;
            border-radius: 15px;
            font-size: 13px;
            font-weight: 500;
            display: inline-block;
        }

        /* Voice message styling */
        .voice-message {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 8px 12px;
        }

        .voice-play-button {
            width: 40px;
            height: 40px;
            background: #5DADE2;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            flex-shrink: 0;
            border: none;
            transition: background 0.2s;
        }

        .voice-play-button:hover {
            background: #48A4DB;
        }

        .voice-play-button::after {
            content: '';
            width: 0;
            height: 0;
            border-left: 10px solid white;
            border-top: 6px solid transparent;
            border-bottom: 6px solid transparent;
            margin-left: 2px;
        }

        .voice-content {
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: 4px;
        }

        .voice-waveform {
            display: flex;
            align-items: center;
            gap: 2px;
            height: 20px;
        }

        .wave-bar {
            width: 3px;
            background: #B0BEC5;
            border-radius: 2px;
            transition: background 0.2s;
        }

        .wave-bar.active {
            background: #5DADE2;
        }

        .voice-duration {
            color: #666;
            font-size: 13px;
            font-weight: 500;
        }

        /* Link preview styling */
        .link-preview {
            border: 1px solid #e0e0e0;
            border-radius: 12px;
            overflow: hidden;
            margin-top: 8px;
            background: #f8f9fa;
        }

        .link-url {
            color: #1877f2;
            text-decoration: none;
            font-size: 14px;
            line-height: 1.4;
            word-break: break-all;
            display: block;
            margin-bottom: 8px;
        }

        .link-url:hover {
            text-decoration: underline;
        }

        .link-preview-content {
            display: flex;
            padding: 12px;
            gap: 12px;
        }

        .link-preview-text {
            flex: 1;
        }

        .link-preview-site {
            color: #65676b;
            font-size: 12px;
            font-weight: 500;
            margin-bottom: 4px;
        }

        .link-preview-title {
            color: #1c1e21;
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 4px;
            line-height: 1.3;
        }

        .link-preview-description {
            color: #65676b;
            font-size: 14px;
            line-height: 1.4;
            display: flex;
            align-items: center;
            gap: 6px;
        }

        .link-preview-image {
            width: 60px;
            height: 60px;
            border-radius: 8px;
            object-fit: cover;
            flex-shrink: 0;
        }

        .heart-emoji {
            font-size: 16px;
        }

        .message-bubble::after {
            content: '';
            position: absolute;
            bottom: -8px;
            left: 20px;
            width: 0;
            height: 0;
            border: 10px solid transparent;
            border-top-color: #ffffff;
            border-bottom: 0;
            margin-left: -10px;
            margin-bottom: -1px;
        }

        .message-text {
            color: #000000;
            font-size: 16px;
            line-height: 1.4;
            margin: 0;
        }

        .message-time {
            color: #8e8e93;
            font-size: 13px;
            margin-top: 4px;
            text-align: right;
        }

        .wave-emoji {
            display: inline-block;
            animation: wave 0.5s ease-in-out;
        }

        @keyframes wave {
            0%, 100% { transform: rotate(0deg); }
            25% { transform: rotate(-10deg); }
            75% { transform: rotate(10deg); }
        }

        /* Alternative bubble styles */
        .bubble-sent {
            background: #ffffff;
            color: #000000;
            align-self: flex-end;
        }

        .bubble-sent::after {
            left: auto;
            right: 20px;
            border-top-color: #ffffff;
        }

        .bubble-sent .message-time {
            color: #8e8e93;
        }

        /* Mobile responsive adjustments */
        @media (max-width: 768px) {
            .chat-container {
                padding: 15px;
            }
            
            .message-bubble {
                max-width: 85%;
                font-size: 16px;
            }
            
            .message-bubble::after,
            .bubble-sent::after {
                border-width: 8px;
                bottom: -6px;
            }
        }

        @media (max-width: 480px) {
            .chat-container {
                padding: 10px;
            }
            
            .message-bubble {
                max-width: 90%;
                padding: 10px 14px;
            }
        }
    </style>
</head>
<body>
    <div class="chat-container">
        <!-- Date separator -->
        <div class="date-separator">
            <div class="date-badge">July 8</div>
        </div>

        <!-- Received message bubble (like in your image) -->
        <div class="message-bubble">
            <div class="reply-icon">
                <div class="icon-wrapper">
                    <svg fill="#ffffff" height="18px" width="18px" viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg" stroke="#ffffff">
                        <path d="M12.7,7.1V6c0-0.8-0.4-1.5-1.1-1.8c-0.7-0.3-1.4-0.2-2,0.2l-6.7,6C2.3,10.8,2,11.4,2,12s0.3,1.2,0.7,1.6l6.8,6 
                          c0.6,0.4,1.3,0.5,2,0.2c0.7-0.3,1.1-1,1.1-1.8v-1c6.6,0.1,12.7,4.1,15.4,10.4c0.2,0.4,0.5,0.6,0.9,0.6c0.1,0,0.1,0,0.2,0 
                          c0.5-0.1,0.8-0.5,0.8-1C30,16.7,22.5,8.2,12.7,7.1z"></path>
                    </svg>
                </div>
            </div>
            <div class="message-text">
                Hi there <span class="wave-emoji">ðŸ‘‹</span>
            </div>
        </div>

        <div class="message-bubble">
            <div class="reply-icon">
                <div class="icon-wrapper">
                    <svg fill="#ffffff" height="18px" width="18px" viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg" stroke="#ffffff">
                        <path d="M12.7,7.1V6c0-0.8-0.4-1.5-1.1-1.8c-0.7-0.3-1.4-0.2-2,0.2l-6.7,6C2.3,10.8,2,11.4,2,12s0.3,1.2,0.7,1.6l6.8,6 
                          c0.6,0.4,1.3,0.5,2,0.2c0.7-0.3,1.1-1,1.1-1.8v-1c6.6,0.1,12.7,4.1,15.4,10.4c0.2,0.4,0.5,0.6,0.9,0.6c0.1,0,0.1,0,0.2,0 
                          c0.5-0.1,0.8-0.5,0.8-1C30,16.7,22.5,8.2,12.7,7.1z"></path>
                    </svg>
                </div>
            </div>
            <div class="message-text">
                How can I help you?
            </div>
            <div class="message-time">11:07</div>
        </div>

        <!-- Example sent message bubble -->
        <div class="message-bubble bubble-sent">
            <div class="reply-icon">
                <div class="icon-wrapper">
                    <svg fill="#ffffff" height="18px" width="18px" viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg" stroke="#ffffff">
                        <path d="M12.7,7.1V6c0-0.8-0.4-1.5-1.1-1.8c-0.7-0.3-1.4-0.2-2,0.2l-6.7,6C2.3,10.8,2,11.4,2,12s0.3,1.2,0.7,1.6l6.8,6 
                          c0.6,0.4,1.3,0.5,2,0.2c0.7-0.3,1.1-1,1.1-1.8v-1c6.6,0.1,12.7,4.1,15.4,10.4c0.2,0.4,0.5,0.6,0.9,0.6c0.1,0,0.1,0,0.2,0 
                          c0.5-0.1,0.8-0.5,0.8-1C30,16.7,22.5,8.2,12.7,7.1z"></path>
                    </svg>
                </div>
            </div>
            <div class="message-text">
                Thanks! Can you show me how this bubble tail works?
            </div>
            <div class="message-time">11:08</div>
        </div>

        <!-- Reply message example (like in your image) -->
        <div class="message-bubble">
            <div class="reply-icon">
                <div class="icon-wrapper">
                    <svg fill="#ffffff" height="18px" width="18px" viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg" stroke="#ffffff">
                        <path d="M12.7,7.1V6c0-0.8-0.4-1.5-1.1-1.8c-0.7-0.3-1.4-0.2-2,0.2l-6.7,6C2.3,10.8,2,11.4,2,12s0.3,1.2,0.7,1.6l6.8,6 
                          c0.6,0.4,1.3,0.5,2,0.2c0.7-0.3,1.1-1,1.1-1.8v-1c6.6,0.1,12.7,4.1,15.4,10.4c0.2,0.4,0.5,0.6,0.9,0.6c0.1,0,0.1,0,0.2,0 
                          c0.5-0.1,0.8-0.5,0.8-1C30,16.7,22.5,8.2,12.7,7.1z"></path>
                    </svg>
                </div>
            </div>
            <div class="reply-container">
                <div class="reply-sender">Marianna</div>
                <div class="reply-text">John</div>
            </div>
            <div class="message-text">
                Why are you always late?
            </div>
            <div class="message-time">11:07</div>
        </div>

        <!-- Date separator for recent reply -->
        <div class="date-separator">
            <div class="date-badge">August 15</div>
        </div>

        <div class="message-bubble bubble-sent">
            <div class="reply-icon">
                <div class="icon-wrapper">
                    <svg fill="#ffffff" height="18px" width="18px" viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg" stroke="#ffffff">
                        <path d="M12.7,7.1V6c0-0.8-0.4-1.5-1.1-1.8c-0.7-0.3-1.4-0.2-2,0.2l-6.7,6C2.3,10.8,2,11.4,2,12s0.3,1.2,0.7,1.6l6.8,6 
                          c0.6,0.4,1.3,0.5,2,0.2c0.7-0.3,1.1-1,1.1-1.8v-1c6.6,0.1,12.7,4.1,15.4,10.4c0.2,0.4,0.5,0.6,0.9,0.6c0.1,0,0.1,0,0.2,0 
                          c0.5-0.1,0.8-0.5,0.8-1C30,16.7,22.5,8.2,12.7,7.1z"></path>
                    </svg>
                </div>
            </div>
            <div class="reply-container">
                <div class="reply-sender">You</div>
                <div class="reply-text">Why are you always late?</div>
            </div>
            <div class="message-text">
                Not late. Anti-early.
            </div>
            <div class="message-time">9:41</div>
        </div>

        <!-- Sent voice message -->
        <div class="message-bubble bubble-sent">
            <div class="reply-icon">
                <div class="icon-wrapper">
                    <svg fill="#ffffff" height="18px" width="18px" viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg" stroke="#ffffff">
                        <path d="M12.7,7.1V6c0-0.8-0.4-1.5-1.1-1.8c-0.7-0.3-1.4-0.2-2,0.2l-6.7,6C2.3,10.8,2,11.4,2,12s0.3,1.2,0.7,1.6l6.8,6 
                          c0.6,0.4,1.3,0.5,2,0.2c0.7-0.3,1.1-1,1.1-1.8v-1c6.6,0.1,12.7,4.1,15.4,10.4c0.2,0.4,0.5,0.6,0.9,0.6c0.1,0,0.1,0,0.2,0 
                          c0.5-0.1,0.8-0.5,0.8-1C30,16.7,22.5,8.2,12.7,7.1z"></path>
                    </svg>
                </div>
            </div>
            <div class="voice-message">
                <button class="voice-play-button" onclick="toggleVoicePlay(this)"></button>
                <div class="voice-content">
                    <div class="voice-waveform">
                        <div class="wave-bar" style="height: 10px;"></div>
                        <div class="wave-bar" style="height: 16px;"></div>
                        <div class="wave-bar" style="height: 8px;"></div>
                        <div class="wave-bar" style="height: 18px;"></div>
                        <div class="wave-bar" style="height: 12px;"></div>
                        <div class="wave-bar" style="height: 14px;"></div>
                        <div class="wave-bar" style="height: 9px;"></div>
                        <div class="wave-bar" style="height: 17px;"></div>
                        <div class="wave-bar" style="height: 11px;"></div>
                        <div class="wave-bar" style="height: 15px;"></div>
                        <div class="wave-bar" style="height: 7px;"></div>
                        <div class="wave-bar" style="height: 19px;"></div>
                        <div class="wave-bar" style="height: 13px;"></div>
                        <div class="wave-bar" style="height: 8px;"></div>
                        <div class="wave-bar" style="height: 16px;"></div>
                        <div class="wave-bar" style="height: 10px;"></div>
                        <div class="wave-bar" style="height: 14px;"></div>
                        <div class="wave-bar" style="height: 6px;"></div>
                        <div class="wave-bar" style="height: 18px;"></div>
                        <div class="wave-bar" style="height: 12px;"></div>
                        <div class="wave-bar" style="height: 9px;"></div>
                        <div class="wave-bar" style="height: 15px;"></div>
                        <div class="wave-bar" style="height: 11px;"></div>
                        <div class="wave-bar" style="height: 17px;"></div>
                        <div class="wave-bar" style="height: 8px;"></div>
                        <div class="wave-bar" style="height: 13px;"></div>
                        <div class="wave-bar" style="height: 10px;"></div>
                        <div class="wave-bar" style="height: 16px;"></div>
                    </div>
                    <div class="voice-duration">00:08</div>
                </div>
            </div>
            <div class="message-time">9:42</div>
        </div>

        <!-- Sent link preview message -->
        <div class="message-bubble bubble-sent">
            <div class="reply-icon">
                <div class="icon-wrapper">
                    <svg fill="#ffffff" height="18px" width="18px" viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg" stroke="#ffffff">
                        <path d="M12.7,7.1V6c0-0.8-0.4-1.5-1.1-1.8c-0.7-0.3-1.4-0.2-2,0.2l-6.7,6C2.3,10.8,2,11.4,2,12s0.3,1.2,0.7,1.6l6.8,6 
                          c0.6,0.4,1.3,0.5,2,0.2c0.7-0.3,1.1-1,1.1-1.8v-1c6.6,0.1,12.7,4.1,15.4,10.4c0.2,0.4,0.5,0.6,0.9,0.6c0.1,0,0.1,0,0.2,0 
                          c0.5-0.1,0.8-0.5,0.8-1C30,16.7,22.5,8.2,12.7,7.1z"></path>
                    </svg>
                </div>
            </div>
            <a href="https://www.facebook.com/100063590619660/posts/pfbid02WUrTeij9XJ46sicbo274cSocRj1WpYo4Bi2bmpuZ1wXoWGmgWBZ9A4bGgy7iAg6dl/" 
               class="link-url" target="_blank">
                https://www.facebook.com/100063590619660/posts/pfbid02WUrTeij9XJ46sicbo274cSocRj1WpYo4Bi2bmpuZ1wXoWGmgWBZ9A4bGgy7iAg6dl/
            </a>
            
            <div class="link-preview">
                <div class="link-preview-content">
                    <div class="link-preview-text">
                        <div class="link-preview-site">Facebook</div>
                        <div class="link-preview-title">Go to</div>
                        <div class="link-preview-description">
                            Facebook to view
                        </div>
                    </div>
                </div>
            </div>
            <div class="message-time">9:43</div>
        </div>

        <!-- Voice message -->
        <div class="message-bubble">
            <div class="reply-icon">
                <div class="icon-wrapper">
                    <svg fill="#ffffff" height="18px" width="18px" viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg" stroke="#ffffff">
                        <path d="M12.7,7.1V6c0-0.8-0.4-1.5-1.1-1.8c-0.7-0.3-1.4-0.2-2,0.2l-6.7,6C2.3,10.8,2,11.4,2,12s0.3,1.2,0.7,1.6l6.8,6 
                          c0.6,0.4,1.3,0.5,2,0.2c0.7-0.3,1.1-1,1.1-1.8v-1c6.6,0.1,12.7,4.1,15.4,10.4c0.2,0.4,0.5,0.6,0.9,0.6c0.1,0,0.1,0,0.2,0 
                          c0.5-0.1,0.8-0.5,0.8-1C30,16.7,22.5,8.2,12.7,7.1z"></path>
                    </svg>
                </div>
            </div>
            <div class="voice-message">
                <button class="voice-play-button" onclick="toggleVoicePlay(this)"></button>
                <div class="voice-content">
                    <div class="voice-waveform">
                        <div class="wave-bar" style="height: 8px;"></div>
                        <div class="wave-bar" style="height: 15px;"></div>
                        <div class="wave-bar" style="height: 12px;"></div>
                        <div class="wave-bar" style="height: 20px;"></div>
                        <div class="wave-bar" style="height: 6px;"></div>
                        <div class="wave-bar" style="height: 18px;"></div>
                        <div class="wave-bar" style="height: 10px;"></div>
                        <div class="wave-bar" style="height: 16px;"></div>
                        <div class="wave-bar" style="height: 8px;"></div>
                        <div class="wave-bar" style="height: 14px;"></div>
                        <div class="wave-bar" style="height: 11px;"></div>
                        <div class="wave-bar" style="height: 19px;"></div>
                        <div class="wave-bar" style="height: 7px;"></div>
                        <div class="wave-bar" style="height: 13px;"></div>
                        <div class="wave-bar" style="height: 9px;"></div>
                        <div class="wave-bar" style="height: 17px;"></div>
                        <div class="wave-bar" style="height: 12px;"></div>
                        <div class="wave-bar" style="height: 8px;"></div>
                        <div class="wave-bar" style="height: 15px;"></div>
                        <div class="wave-bar" style="height: 6px;"></div>
                        <div class="wave-bar" style="height: 11px;"></div>
                        <div class="wave-bar" style="height: 14px;"></div>
                        <div class="wave-bar" style="height: 9px;"></div>
                        <div class="wave-bar" style="height: 16px;"></div>
                        <div class="wave-bar" style="height: 7px;"></div>
                        <div class="wave-bar" style="height: 13px;"></div>
                        <div class="wave-bar" style="height: 10px;"></div>
                        <div class="wave-bar" style="height: 18px;"></div>
                        <div class="wave-bar" style="height: 8px;"></div>
                        <div class="wave-bar" style="height: 12px;"></div>
                    </div>
                    <div class="voice-duration">00:14</div>
                </div>
            </div>
            <div class="message-time">3:59 PM</div>
        </div>

        <!-- Link preview message -->
        <div class="message-bubble">
            <div class="reply-icon">
                <div class="icon-wrapper">
                    <svg fill="#ffffff" height="18px" width="18px" viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg" stroke="#ffffff">
                        <path d="M12.7,7.1V6c0-0.8-0.4-1.5-1.1-1.8c-0.7-0.3-1.4-0.2-2,0.2l-6.7,6C2.3,10.8,2,11.4,2,12s0.3,1.2,0.7,1.6l6.8,6 
                          c0.6,0.4,1.3,0.5,2,0.2c0.7-0.3,1.1-1,1.1-1.8v-1c6.6,0.1,12.7,4.1,15.4,10.4c0.2,0.4,0.5,0.6,0.9,0.6c0.1,0,0.1,0,0.2,0 
                          c0.5-0.1,0.8-0.5,0.8-1C30,16.7,22.5,8.2,12.7,7.1z"></path>
                    </svg>
                </div>
            </div>
            <a href="https://www.facebook.com/100063590619660/posts/pfbid02WUrTeij9XJ46sicbo274cSocRj1WpYo4Bi2bmpuZ1wXoWGmgWBZ9A4bGgy7iAg6dl/" 
               class="link-url" target="_blank">
                https://www.facebook.com/100063590619660/posts/pfbid02WUrTeij9XJ46sicbo274cSocRj1WpYo4Bi2bmpuZ1wXoWGmgWBZ9A4bGgy7iAg6dl/
            </a>
            
            <div class="link-preview">
                <div class="link-preview-content">
                    <div class="link-preview-text">
                        <div class="link-preview-site">Facebook</div>
                        <div class="link-preview-title">Go to</div>
                        <div class="link-preview-description">
                            Facebook to view
                        </div>
                    </div>
                </div>
            </div>
            <div class="message-time">8:22 PM</div>
        </div>

    </div>

    <script>
        function toggleVoicePlay(button) {
            const isPlaying = button.classList.contains('playing');
            
            if (isPlaying) {
                // Stop playing
                button.classList.remove('playing');
                button.innerHTML = '';
                button.style.background = '#5DADE2';
                
                // Reset all wave bars
                const waveBars = button.closest('.voice-message').querySelectorAll('.wave-bar');
                waveBars.forEach(bar => bar.classList.remove('active'));
            } else {
                // Start playing
                button.classList.add('playing');
                button.innerHTML = 'â¸';
                button.style.background = '#48A4DB';
                button.style.color = 'white';
                button.style.fontSize = '16px';
                
                // Animate wave bars
                const waveBars = button.closest('.voice-message').querySelectorAll('.wave-bar');
                let currentBar = 0;
                
                const animateWaves = setInterval(() => {
                    if (currentBar > 0) {
                        waveBars[currentBar - 1].classList.remove('active');
                    }
                    
                    if (currentBar < waveBars.length) {
                        waveBars[currentBar].classList.add('active');
                        currentBar++;
                    } else {
                        clearInterval(animateWaves);
                        setTimeout(() => {
                            toggleVoicePlay(button);
                        }, 500);
                    }
                }, 100);
            }
        }

        // Slide to reply functionality
        let activeElement = null;
        let startX = 0;
        let currentX = 0;
        let isDragging = false;

        function addSlideGesture() {
            const messages = document.querySelectorAll('.message-bubble');
            
            messages.forEach(message => {
                // Touch events
                message.addEventListener('touchstart', handleTouchStart, { passive: true });
                message.addEventListener('touchmove', handleTouchMove, { passive: false });
                message.addEventListener('touchend', handleTouchEnd, { passive: true });
                
                // Mouse events for desktop
                message.addEventListener('mousedown', handleMouseStart);
                message.addEventListener('mousemove', handleMouseMove);
                message.addEventListener('mouseup', handleMouseEnd);
                message.addEventListener('mouseleave', handleMouseEnd);
            });
        }

        function handleTouchStart(e) {
            startX = e.touches[0].clientX;
            activeElement = e.currentTarget;
            isDragging = false;
        }

        function handleTouchMove(e) {
            if (!activeElement) return;
            
            currentX = e.touches[0].clientX;
            const diffX = currentX - startX;
            
            // Only allow sliding to the right and limit the distance
            if (diffX > 0) {
                e.preventDefault();
                isDragging = true;
                const slideDistance = Math.min(diffX * 0.5, 80); // Max slide 80px
                
                activeElement.classList.add('sliding');
                activeElement.style.transform = `translateX(${slideDistance}px)`;
                
                // Show reply icon when sliding
                const replyIcon = activeElement.querySelector('.reply-icon');
                if (replyIcon && slideDistance > 20) {
                    replyIcon.classList.add('show');
                }
            }
        }

        function handleTouchEnd(e) {
            if (activeElement && isDragging) {
                returnToPosition();
            }
            resetGesture();
        }

        function handleMouseStart(e) {
            startX = e.clientX;
            activeElement = e.currentTarget;
            isDragging = false;
            e.preventDefault();
        }

        function handleMouseMove(e) {
            if (!activeElement) return;
            
            currentX = e.clientX;
            const diffX = currentX - startX;
            
            // Only allow sliding to the right and limit the distance
            if (diffX > 0) {
                isDragging = true;
                const slideDistance = Math.min(diffX * 0.5, 80); // Max slide 80px
                
                activeElement.classList.add('sliding');
                activeElement.style.transform = `translateX(${slideDistance}px)`;
                
                // Show reply icon when sliding
                const replyIcon = activeElement.querySelector('.reply-icon');
                if (replyIcon && slideDistance > 20) {
                    replyIcon.classList.add('show');
                }
            }
        }

        function handleMouseEnd(e) {
            if (activeElement && isDragging) {
                returnToPosition();
            }
            resetGesture();
        }

        function returnToPosition() {
            if (activeElement) {
                activeElement.classList.remove('sliding');
                activeElement.classList.add('returning');
                activeElement.style.transform = 'translateX(0px)';
                
                // Hide reply icon
                const replyIcon = activeElement.querySelector('.reply-icon');
                if (replyIcon) {
                    replyIcon.classList.remove('show');
                }
                
                // Remove returning class after animation
                setTimeout(() => {
                    if (activeElement) {
                        activeElement.classList.remove('returning');
                    }
                }, 300);
            }
        }

        function resetGesture() {
            activeElement = null;
            startX = 0;
            currentX = 0;
            isDragging = false;
        }

        // Initialize slide gestures when page loads
        document.addEventListener('DOMContentLoaded', addSlideGesture);
    </script>
</body>
</html>
